"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[270],{81539:function(e,n,r){var t=r(29439),i=r(72791),c=r(78983),s=r(80184),a=(0,i.forwardRef)((function(e,n){var r=e.message,a=e.onResponse,o=(0,i.useState)(!1),u=(0,t.Z)(o,2),l=u[0],d=u[1],f=function(e){a&&a(e)};return(0,i.useImperativeHandle)(n,(function(){return{show:function(e){d(e)}}}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(c.Tk,{visible:l,onClose:function(){return d(!1)},children:[(0,s.jsx)(c.p0,{onClose:function(){return d(!1)},children:(0,s.jsx)(c.fl,{children:"Confirmaci\xf3n"})}),(0,s.jsx)(c.sD,{children:r}),(0,s.jsxs)(c.Ym,{children:[(0,s.jsx)(c.u5,{style:{width:50},variant:"outline",color:"secondary",onClick:function(){return f(!0)},children:"SI"}),(0,s.jsx)(c.u5,{style:{width:50},color:"primary",onClick:function(){return f(!1)},children:"NO"})]})]})})}));n.Z=a},83708:function(e,n){n.Z={ENTER_KEYCODE:13,TAB_KEYCODE:9,AVAILABLE_BILLS:[2e3,5e3,1e4,2e4,5e4,1e5]}},99262:function(e,n,r){r.d(n,{l:function(){return i}});var t=r(72791),i=function(e,n){var r=(0,t.useRef)(!1);(0,t.useEffect)((function(){if(r.current)return e();r.current=!0}),n)}},46252:function(e,n,r){r.d(n,{M3:function(){return o},YX:function(){return l},jW:function(){return u},u0:function(){return a}});var t=r(1413),i=r(74165),c=r(15861),s=r(64708),a=function(e){return function(){var n=(0,c.Z)((0,i.Z)().mark((function n(r,t,c){var a;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.post("/item-categories",e);case 2:a=n.sent,201===a.status?(r((0,s.gc)(!0)),r(u({page:1}))):r((0,s.gc)(!1));case 5:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}()},o=function(e){return function(){var n=(0,c.Z)((0,i.Z)().mark((function n(r,c,a){var o,l,d;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=(0,t.Z)({},e),l=o._id,delete o._id,n.next=5,a.put("/item-categories/".concat(l),o);case 5:d=n.sent,201===d.status?(r((0,s.gc)(!0)),r(u({page:1}))):r((0,s.gc)(!1));case 8:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}()},u=function(e){return function(){var n=(0,c.Z)((0,i.Z)().mark((function n(r,t,c){var a,o,u;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new URLSearchParams(e).toString(),n.next=3,c.get("/item-categories".concat(a.length>0?"?"+a:""));case 3:o=n.sent,u=o.data,200===o.status&&r((0,s.JD)(u));case 7:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}()},l=function(e){return function(){var n=(0,c.Z)((0,i.Z)().mark((function n(r,t,c){var a,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,c.get("/item-categories/code/".concat(e));case 4:a=n.sent,o=a.data,200===a.status&&r((0,s.QZ)(o));case 8:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}()}},40601:function(e,n,r){r.r(n),r.d(n,{default:function(){return w}});var t=r(74165),i=r(15861),c=r(29439),s=r(72791),a=r(78983),o=r(93433),u=r(4942),l=r(1413),d=r(59434),f=(r(42087),r(46252)),x=r(47149),h=r(81539),m=r(80184),p={name:"",code:"",description:"",price:"",categoryId:"",units:0,measurementUnit:""};var j=function(e){var n,r=(0,d.I0)(),j=(0,d.v9)((function(e){return e.itemCategories.itemCategories})),v=(0,d.v9)((function(e){return e.items.existsByCode})),g=(0,s.useState)(p),b=(0,c.Z)(g,2),Z=b[0],k=b[1],y=(0,s.useState)({code:!1,description:!1,name:!1,price:!1,categoryId:!1,measurementUnit:!1}),C=(0,c.Z)(y,2),N=C[0],w=C[1],E=(0,s.useState)(!1),I=(0,c.Z)(E,2),O=I[0],R=I[1],S=(0,s.useRef)(),_=null===(n=e.item)||void 0===n?void 0:n.code;(0,s.useEffect)((function(){e.item&&k(e.item),r((0,f.jW)({parse:!0}))}),[r,e.item]);var D=function(){return R(!O)},T=function(n){var t,i=n.target,c=i.name,s=i.value;k((0,l.Z)((0,l.Z)({},Z),{},(0,u.Z)({},c,s))),w((0,l.Z)((0,l.Z)({},N),{},(0,u.Z)({},c,!s))),"code"===c&&(t=s,e.item&&_!==t&&r((0,x.lC)(t)))},A=function(){k(p)},U=(0,m.jsx)("button",{className:"close",onClick:D,children:"\xd7"}),Y=function(){var e=(0,l.Z)({},Z),n=e.name,r=e.code,t=e.description,i=e.price,c=e.categoryId,s=e.measurementUnit,a=(0,l.Z)({},N);return a.code=!r||v,a.description=!t,a.name=!n,a.price=!i,a.categoryId=!c,a.measurementUnit=!s,w(a),Object.values(a).every((function(e){return!1===e}))},B=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Y()&&(e.onSave((0,l.Z)({},Z)),A());case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.KB,{fluid:!0,children:(0,m.jsxs)(a.xH,{children:[(0,m.jsxs)(a.bn,{children:[e.item?"EDITANDO":"CREANDO"," ITEM"]}),(0,m.jsx)(a.sl,{children:(0,m.jsxs)(a.lx,{className:"mt-2 row g-3 needs-validation",noValidate:!0,children:[(0,m.jsxs)(a.rb,{style:{marginTop:"40px"},children:[(0,m.jsx)(a.b7,{xs:"12",lg:"4",children:(0,m.jsx)(a.jO,{label:"C\xf3digo",type:"text",name:"code",value:Z.code,feedback:v?"El c\xf3digo ya se encuentra registrado":"Campo obligatorio",invalid:v||N.code,required:!0,onChange:function(e){return T(e)}})}),(0,m.jsx)(a.b7,{xs:"12",lg:"4",children:(0,m.jsx)(a.jO,{label:"Nombre",type:"text",name:"name",value:Z.name,feedbackInvalid:"Campo obligatorio",invalid:N.name,required:!0,onChange:function(e){return T(e)}})}),(0,m.jsx)(a.b7,{xs:"12",lg:"4",children:(0,m.jsx)(a.jO,{label:"Descripci\xf3n",type:"text",name:"description",value:Z.description,feedbackInvalid:"Campo obligatorio",invalid:N.description,required:!0,onChange:function(e){return T(e)}})})]}),(0,m.jsxs)(a.rb,{children:[(0,m.jsx)(a.b7,{xs:"12",lg:"4",children:(0,m.jsx)(a.jO,{label:"Precio",type:"number",name:"price",value:Z.price,feedbackInvalid:"Campo obligatorio",invalid:N.price,required:!0,onChange:function(e){return T(e)}})}),(0,m.jsx)(a.b7,{xs:"12",lg:"4",children:(0,m.jsx)(a.LX,{label:"Categoria",name:"categoryId",value:Z.categoryId,required:!0,feedbackInvalid:"Campo obligatorio",invalid:N.categoryId,onChange:function(e){return T(e)},"aria-label":"Default select example",options:["Seleccione la categoria"].concat((0,o.Z)(j))})}),(0,m.jsx)(a.b7,{xs:"12",lg:"4",children:(0,m.jsx)(a.jO,{label:"Unidad de medida",type:"text",name:"measurementUnit",value:Z.measurementUnit,feedbackInvalid:"Campo obligatorio",invalid:N.measurementUnit,required:!0,onChange:function(e){return T(e)}})})]})]})}),(0,m.jsx)(a.Bt,{className:"mt-2",children:(0,m.jsx)(a.rb,{className:"mt-0",children:(0,m.jsxs)(a.b7,{className:"text-center",xs:"8",lg:{offset:4,span:4},children:[(0,m.jsx)(a.u5,{color:"success",type:"button",onClick:function(){return B()},children:e.item?"EDITAR":"GUARDAR"}),"\xa0 \xa0",(0,m.jsx)(a.u5,{variant:"outline",color:"secondary",onClick:function(){S.current.show(!0)},children:"CANCELAR"})]})})})]})}),(0,m.jsx)(h.Z,{ref:S,onResponse:function(n){n&&e.onCancel(),n||(S.current.show(!1),A())},message:"\xbfEst\xe1s seguro que quieres cancelar?"}),(0,m.jsxs)(a.Tk,{isOpen:O,toggle:D,children:[(0,m.jsx)(a.p0,{toggle:D,close:U,children:"Escaneando"}),(0,m.jsx)(a.sD,{children:(0,m.jsx)("div",{id:"reader",width:"600px",style:{maxWidth:"750px"}})}),(0,m.jsx)(a.Ym,{children:(0,m.jsx)(a.u5,{color:"secondary",onClick:D,children:"Cancelar"})})]})]})},v=r.p+"static/media/new.38c12e8dca1ed9073681.ico",g=r(83708),b=r(2703),Z=r(99262),k=r(79926),y=r(54270),C=g.Z.ENTER_KEYCODE,N=g.Z.TAB_KEYCODE;var w=function(){var e=(0,d.I0)(),n=(0,d.v9)((function(e){return e.items.items})),r=(0,d.v9)((function(e){return e.items.saveSuccess})),o=(0,s.useState)(""),u=(0,c.Z)(o,2),l=u[0],f=u[1],h=(0,s.useState)(!1),p=(0,c.Z)(h,2),g=p[0],w=p[1],E=(0,s.useState)(null),I=(0,c.Z)(E,2),O=I[0],R=I[1],S=(0,s.useState)(1),_=(0,c.Z)(S,2),D=_[0],T=_[1];(0,s.useEffect)((function(){f(""),e((0,x.kk)({page:1}))}),[e]),(0,Z.l)((function(){(0,k.G)(e,{message:"Guardado exitosamente!"}),R(null),w(!1)}),[r]);var A=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e((0,x.kk)({page:1})),w(!1);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),U=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:T(r=1===D?1:D-1),e((0,x.kk)({page:r}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Y=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:T(r=D+1),e((0,x.kk)({page:r}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.keyCode,[C,N].includes(r)&&q();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l){n.next=3;break}return e((0,x.kk)({code:l.trim(),name:l.trim(),page:1})),n.abrupt("return");case 3:e((0,x.kk)({page:1}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(a.KB,{className:"mt--6",fluid:!0,children:(0,m.jsx)(a.rb,{children:(0,m.jsx)(a.b7,{children:(0,m.jsxs)(a.xH,{className:"mt-6 shadow border-10",children:[(0,m.jsxs)(a.bn,{children:[(0,m.jsx)(y.q,{children:(0,m.jsx)("title",{children:"ITEMS"})}),(0,m.jsx)(a.tj,{children:"ITEMS"})]}),(0,m.jsxs)(a.sl,{children:[!g&&(0,m.jsxs)(a.rb,{children:[(0,m.jsx)(a.b7,{xs:"4",lg:"3",children:(0,m.jsx)(a.u5,{variant:"outline",color:"success",onClick:function(){R(null),w(!0)},children:"NUEVO ITEM"})}),(0,m.jsx)(a.b7,{lg:"5",children:(0,m.jsxs)(a.YR,{children:[(0,m.jsx)(a.jO,{type:"text",name:"searchTerm",placeholder:"...",value:l,onChange:function(e){return function(e){var n=e.target.value;f(n)}(e)},onKeyDown:function(e){return B(e)}}),(0,m.jsx)(a.u5,{type:"button",variant:"outline",color:"primary",onClick:q,children:"BUSCAR"}),(0,m.jsx)(a.u5,{variant:"outline",type:"button",color:"secondary",onClick:function(){f(""),e((0,x.kk)({page:1}))},children:"BORRAR"})]})})]}),!g&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"d-lg-none",children:n.map((function(e){var n=e.name,r=e.code,t=e.description,i=e.price;return(0,m.jsx)(a.xH,{style:{width:"auto"},children:(0,m.jsxs)(a.rb,{className:"g-0",children:[(0,m.jsx)(a.b7,{xs:4,children:(0,m.jsx)(a.pX,{src:v})}),(0,m.jsx)(a.b7,{xs:8,children:(0,m.jsxs)(a.sl,{children:[(0,m.jsx)(a.rb,{children:(0,m.jsx)(a.b7,{children:n})}),(0,m.jsx)(a.rb,{children:(0,m.jsx)(a.b7,{children:r})}),(0,m.jsx)(a.rb,{children:(0,m.jsx)(a.b7,{children:t})}),(0,m.jsx)(a.rb,{children:(0,m.jsxs)(a.b7,{children:["$",i]})})]})})]},r)},r)}))}),(0,m.jsx)("div",{className:"d-none d-lg-block",children:(0,m.jsxs)(a.Sx,{children:[(0,m.jsx)(a.V,{children:(0,m.jsxs)(a.T6,{children:[(0,m.jsx)(a.is,{children:"Nombre"}),(0,m.jsx)(a.is,{children:"C\xf3digo"}),(0,m.jsx)(a.is,{children:"Descripci\xf3n"}),(0,m.jsx)(a.is,{children:"Precio"}),(0,m.jsx)(a.is,{children:"\xa0"})]})}),(0,m.jsx)(a.NR,{children:n.map((function(e){return(0,m.jsxs)(a.T6,{children:[(0,m.jsx)(a.NN,{xs:"12",className:"text-uppercase",children:e.name}),(0,m.jsx)(a.NN,{className:"fs-6",xs:"12",children:e.code}),(0,m.jsx)(a.NN,{xs:"12",className:"text-break",children:e.description}),(0,m.jsx)(a.NN,{xs:"12",children:(0,b.x)(e.price)}),(0,m.jsx)(a.NN,{xs:"12",children:(0,m.jsx)(a.u5,{size:"sm",variant:"outline",color:"info",onClick:function(){return function(e){w(!0),R(e)}(e)},children:"Editar"})})]},e.code)}))})]})}),(0,m.jsx)(a.Bt,{className:"py-4",children:(0,m.jsxs)(a.rb,{children:[(0,m.jsx)(a.b7,{children:(0,m.jsx)("div",{className:"d-grid col-12 mx-auto",children:(0,m.jsx)(a.u5,{type:"button",variant:"outline",color:"secondary",onClick:U,children:"ANTERIOR"})})}),(0,m.jsx)(a.b7,{children:(0,m.jsx)("div",{className:"d-grid col-12 mx-auto",children:(0,m.jsx)(a.u5,{type:"button",variant:"outline",color:"secondary",onClick:Y,children:"SIGUIENTE"})})})]})})]}),g&&(0,m.jsx)(j,{item:O,onSave:function(n){n._id?e((0,x.$G)(n)):e((0,x.OK)(n))},onCancel:A})]})]})})})})})}},79926:function(e,n,r){r.d(n,{G:function(){return i}});var t=r(43744),i=function(e,n){var r=n.message,i=n.color,c=void 0===i?"success":i,s=n.delay,a=void 0===s?2e3:s;r||console.error("Toast notification must have a message"),e((0,t.js)({message:r,color:c,delay:a})),e((0,t.W3)(!0))}},2703:function(e,n,r){r.d(n,{p:function(){return o},x:function(){return a}});var t=r(97892),i=r.n(t),c=r(83027),s=r.n(c);i().extend(s());var a=function(e){return Number.isInteger(e)&&e>=0?new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(e):e},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY hh:mm a";if("string"===typeof e)return i()(e).utcOffset(-300).format(n);var r=e||{},t=r.date,c=r.offset;return t&&c?i()(t).utcOffset(c/6e4).format(n):""}}}]);
//# sourceMappingURL=270.e689e134.chunk.js.map