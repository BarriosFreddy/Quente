"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[270],{83708:function(e,n){n.Z={ENTER_KEYCODE:13,TAB_KEYCODE:9,AVAILABLE_BILLS:[2e3,5e3,1e4,2e4,5e4,1e5]}},99262:function(e,n,r){r.d(n,{l:function(){return i}});var t=r(72791),i=function(e,n){var r=(0,t.useRef)(!1);(0,t.useEffect)((function(){if(r.current)return e();r.current=!0}),n)}},46252:function(e,n,r){r.d(n,{j:function(){return a},u:function(){return s}});var t=r(74165),i=r(15861),c=r(64708),s=function(e){return function(){var n=(0,i.Z)((0,t.Z)().mark((function n(r,i,s){var a,o;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.post("/item-categories",e);case 2:a=n.sent,o=a.status,r(200===o?(0,c.gc)(!0):(0,c.gc)(!1));case 5:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}()},a=function(e){return function(){var n=(0,i.Z)((0,t.Z)().mark((function n(r,i,s){var a,o,u;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new URLSearchParams(e).toString(),n.next=3,s.get("/item-categories".concat(a.length>0?"?"+a:""));case 3:o=n.sent,u=o.data,200===o.status&&r((0,c.JD)(u));case 7:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}()}},40601:function(e,n,r){r.r(n),r.d(n,{default:function(){return y}});var t=r(74165),i=r(15861),c=r(29439),s=r(72791),a=r(78983),o=r(93433),u=r(4942),l=r(1413),d=r(59434),x=(r(42087),r(46252)),m=r(47149),f=r(99262),h=r(80184),p={name:"",code:"",description:"",price:"",categoryId:"",units:0,measurementUnit:""};var j=function(e){var n=(0,d.I0)(),r=(0,d.v9)((function(e){return e.itemCategories.itemCategories})),f=(0,d.v9)((function(e){return e.items.existsByCode})),j=(0,s.useState)(p),v=(0,c.Z)(j,2),g=v[0],b=v[1],C=(0,s.useState)({code:!1,description:!1,name:!1,price:!1,categoryId:!1,measurementUnit:!1}),Z=(0,c.Z)(C,2),k=Z[0],y=Z[1],N=(0,s.useState)(!1),E=(0,c.Z)(N,2),w=E[0],I=E[1],O=function(){return I(!w)};(0,s.useEffect)((function(){e.item&&b(e.item),n((0,x.j)({parse:!0}))}),[n,e.item]);var D=function(e){var r,t=e.target,i=t.name,c=t.value;b((0,l.Z)((0,l.Z)({},g),{},(0,u.Z)({},i,c))),y((0,l.Z)((0,l.Z)({},k),{},(0,u.Z)({},i,!c))),"code"===i&&(r=c,n((0,m.lC)(r)))},_=(0,h.jsx)("button",{className:"close",onClick:O,children:"\xd7"}),S=function(){var e=(0,l.Z)({},g),n=e.name,r=e.code,t=e.description,i=e.price,c=e.categoryId,s=e.measurementUnit,a=(0,l.Z)({},k);return a.code=!r||f,a.description=!t,a.name=!n,a.price=!i,a.categoryId=!c,a.measurementUnit=!s,y(a),Object.values(a).every((function(e){return!1===e}))},T=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:S()&&(e.onSave((0,l.Z)({},g)),b(p));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.KB,{fluid:!0,children:(0,h.jsxs)(a.xH,{children:[(0,h.jsxs)(a.bn,{children:[e.item?"EDITANDO":"CREANDO"," ITEM"]}),(0,h.jsx)(a.sl,{children:(0,h.jsxs)(a.lx,{className:"mt-2 row g-3 needs-validation",noValidate:!0,children:[(0,h.jsxs)(a.rb,{style:{marginTop:"40px"},children:[(0,h.jsx)(a.b7,{xs:"12",lg:"4",children:(0,h.jsx)(a.jO,{label:"C\xf3digo",type:"text",name:"code",value:g.code,feedback:f?"El c\xf3digo ya se encuentra registrado":"Campo obligatorio",invalid:f||k.code,required:!0,onChange:function(e){return D(e)}})}),(0,h.jsx)(a.b7,{xs:"12",lg:"4",children:(0,h.jsx)(a.jO,{label:"Nombre",type:"text",name:"name",value:g.name,feedbackInvalid:"Campo obligatorio",invalid:k.name,required:!0,onChange:function(e){return D(e)}})}),(0,h.jsx)(a.b7,{xs:"12",lg:"4",children:(0,h.jsx)(a.jO,{label:"Descripci\xf3n",type:"text",name:"description",value:g.description,feedbackInvalid:"Campo obligatorio",invalid:k.description,required:!0,onChange:function(e){return D(e)}})})]}),(0,h.jsxs)(a.rb,{children:[(0,h.jsx)(a.b7,{xs:"12",lg:"4",children:(0,h.jsx)(a.jO,{label:"Precio",type:"number",name:"price",value:g.price,feedbackInvalid:"Campo obligatorio",invalid:k.price,required:!0,onChange:function(e){return D(e)}})}),(0,h.jsx)(a.b7,{xs:"12",lg:"4",children:(0,h.jsx)(a.LX,{label:"Categoria",name:"categoryId",value:g.categoryId,required:!0,onChange:function(e){return D(e)},"aria-label":"Default select example",options:["Seleccione la categoria"].concat((0,o.Z)(r))})}),(0,h.jsx)(a.b7,{xs:"12",lg:"4",children:(0,h.jsx)(a.jO,{label:"Unidad de medida",type:"text",name:"measurementUnit",value:g.measurementUnit,feedbackInvalid:"Campo obligatorio",invalid:k.measurementUnit,required:!0,onChange:function(e){return D(e)}})})]})]})}),(0,h.jsx)(a.Bt,{className:"mt-2",children:(0,h.jsx)(a.rb,{className:"mt-0",children:(0,h.jsxs)(a.b7,{className:"text-center",xs:"8",lg:{offset:4,span:4},children:[(0,h.jsx)(a.u5,{color:"success",type:"button",onClick:function(){return T()},children:e.item?"EDITAR":"GUARDAR"}),"\xa0 \xa0",(0,h.jsx)(a.u5,{variant:"outline",color:"secondary",onClick:function(){e.onCancel()},children:"CANCELAR"})]})})})]})}),(0,h.jsxs)(a.Tk,{isOpen:w,toggle:O,children:[(0,h.jsx)(a.p0,{toggle:O,close:_,children:"Escaneando"}),(0,h.jsx)(a.sD,{children:(0,h.jsx)("div",{id:"reader",width:"600px",style:{maxWidth:"750px"}})}),(0,h.jsx)(a.Ym,{children:(0,h.jsx)(a.u5,{color:"secondary",onClick:O,children:"Cancelar"})})]})]})},v=r.p+"static/media/new.38c12e8dca1ed9073681.ico",g=r(83708),b=r(2703),C=r(79926),Z=g.Z.ENTER_KEYCODE,k=g.Z.TAB_KEYCODE;var y=function(){var e=(0,d.I0)(),n=(0,d.v9)((function(e){return e.items.items})),r=(0,d.v9)((function(e){return e.items.saveSuccess})),o=(0,s.useState)(""),u=(0,c.Z)(o,2),l=u[0],x=u[1],p=(0,s.useState)(!1),g=(0,c.Z)(p,2),y=g[0],N=g[1],E=(0,s.useState)(null),w=(0,c.Z)(E,2),I=w[0],O=w[1],D=(0,s.useState)(1),_=(0,c.Z)(D,2),S=_[0],T=_[1];(0,s.useEffect)((function(){x("")}),[]),(0,s.useEffect)((function(){e((0,m.kk)({page:1}))}),[e]),(0,f.l)((function(){(0,C.G)(e,{message:"Guardado exitosamente!"}),O(null),N(!1)}),[r]);var A=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e((0,m.kk)({page:1})),N(!1);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),R=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:T(r=1===S?1:S-1),e((0,m.kk)({page:r}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),U=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:T(r=S+1),e((0,m.kk)({page:r}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.keyCode,[Z,k].includes(r)&&Y();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l){n.next=3;break}return e((0,m.kk)({code:l.trim(),name:l.trim(),page:1})),n.abrupt("return");case 3:e((0,m.kk)({page:1}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(a.KB,{className:"mt--6",fluid:!0,children:(0,h.jsx)(a.rb,{children:(0,h.jsx)(a.b7,{children:(0,h.jsxs)(a.xH,{className:"mt-6 shadow border-10",children:[(0,h.jsx)(a.bn,{className:"border-0",children:!y&&(0,h.jsxs)(a.rb,{children:[(0,h.jsx)(a.b7,{xs:"4",lg:"3",children:(0,h.jsx)(a.u5,{variant:"outline",color:"success",onClick:function(){O(null),N(!0)},children:"NUEVO ITEM"})}),(0,h.jsx)(a.b7,{lg:"5",children:(0,h.jsxs)(a.YR,{children:[(0,h.jsx)(a.jO,{type:"text",name:"searchTerm",placeholder:"...",value:l,onChange:function(e){return function(e){var n=e.target.value;x(n)}(e)},onKeyDown:function(e){return B(e)}}),(0,h.jsx)(a.u5,{type:"button",variant:"outline",color:"primary",onClick:Y,children:"BUSCAR"})]})})]})}),(0,h.jsxs)(a.sl,{children:[!y&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"d-lg-none",children:n.map((function(e){var n=e.name,r=e.code,t=e.description,i=e.price;return(0,h.jsx)(a.xH,{style:{width:"auto"},children:(0,h.jsxs)(a.rb,{className:"g-0",children:[(0,h.jsx)(a.b7,{xs:4,children:(0,h.jsx)(a.pX,{src:v})}),(0,h.jsx)(a.b7,{xs:8,children:(0,h.jsxs)(a.sl,{children:[(0,h.jsx)(a.rb,{children:(0,h.jsx)(a.b7,{children:n})}),(0,h.jsx)(a.rb,{children:(0,h.jsx)(a.b7,{children:r})}),(0,h.jsx)(a.rb,{children:(0,h.jsx)(a.b7,{children:t})}),(0,h.jsx)(a.rb,{children:(0,h.jsxs)(a.b7,{children:["$",i]})})]})})]},r)},r)}))}),(0,h.jsx)("div",{className:"d-none d-lg-block",children:(0,h.jsxs)(a.Sx,{children:[(0,h.jsx)(a.V,{children:(0,h.jsxs)(a.T6,{children:[(0,h.jsx)(a.is,{children:"Nombre"}),(0,h.jsx)(a.is,{children:"C\xf3digo"}),(0,h.jsx)(a.is,{children:"Descripci\xf3n"}),(0,h.jsx)(a.is,{children:"Precio"}),(0,h.jsx)(a.is,{children:"\xa0"})]})}),(0,h.jsx)(a.NR,{children:n.map((function(e){return(0,h.jsxs)(a.T6,{children:[(0,h.jsx)(a.NN,{xs:"12",className:"text-uppercase",children:e.name}),(0,h.jsx)(a.NN,{className:"fs-6",xs:"12",children:e.code}),(0,h.jsx)(a.NN,{xs:"12",className:"text-break",children:e.description}),(0,h.jsx)(a.NN,{xs:"12",children:(0,b.x)(e.price)}),(0,h.jsx)(a.NN,{xs:"12",children:(0,h.jsx)(a.u5,{size:"sm",variant:"outline",color:"info",onClick:function(){return function(e){N(!0),O(e)}(e)},children:"Editar"})})]},e.code)}))})]})}),(0,h.jsx)(a.Bt,{className:"py-4",children:(0,h.jsxs)(a.rb,{children:[(0,h.jsx)(a.b7,{children:(0,h.jsx)("div",{className:"d-grid col-12 mx-auto",children:(0,h.jsx)(a.u5,{type:"button",variant:"outline",color:"secondary",onClick:R,children:"ANTERIOR"})})}),(0,h.jsx)(a.b7,{children:(0,h.jsx)("div",{className:"d-grid col-12 mx-auto",children:(0,h.jsx)(a.u5,{type:"button",variant:"outline",color:"secondary",onClick:U,children:"SIGUIENTE"})})})]})})]}),y&&(0,h.jsx)(j,{item:I,onSave:function(n){n._id?e((0,m.$G)(n)):e((0,m.OK)(n))},onCancel:A})]})]})})})})})}},79926:function(e,n,r){r.d(n,{G:function(){return i}});var t=r(43744),i=function(e,n){var r=n.message,i=n.color,c=void 0===i?"success":i,s=n.delay,a=void 0===s?2e3:s;r||console.error("Toast notification must have a message"),e((0,t.js)({message:r,color:c,delay:a})),e((0,t.W3)(!0))}},2703:function(e,n,r){r.d(n,{p:function(){return s},x:function(){return c}});var t=r(97892),i=r.n(t),c=function(e){return Number.isInteger(e)&&e>=0?new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(e):e},s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MM-YYYY hh:mm a";return i()(e).format(n)}}}]);
//# sourceMappingURL=270.8e8aeba4.chunk.js.map