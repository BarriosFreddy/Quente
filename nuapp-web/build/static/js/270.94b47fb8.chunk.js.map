{"version":3,"file":"static/js/270.94b47fb8.chunk.js","mappings":"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","sources":["constants.js","modules/billing/services/item-categories.service.js","modules/billing/views/items/ItemForm.js","modules/billing/views/items/Items.js","utils/index.js"],"sourcesContent":["const CONSTANTS = {\n  ENTER_KEYCODE: 13,\n  TAB_KEYCODE: 9,\n  AVAILABLE_BILLS: [2000, 5000, 10000, 20000, 50000, 100000],\n}\n\nexport default CONSTANTS\n","import { saveSuccess, setItemCategories } from '../reducers/item-categories.reducer'\n\nexport const saveItemCategory = (billing) => async (dispatch, _, api) => {\n  const { status } = await api.post('/item-categories', billing)\n  status === 200 ? dispatch(saveSuccess(true)) : dispatch(saveSuccess(false))\n}\n\nexport const getItemCategories = (params) => async (dispatch, _, api) => {\n  const searchParams = new URLSearchParams(params).toString()\n  const { data, status } = await api.get(\n    `/item-categories${searchParams.length > 0 ? '?' + searchParams : ''}`,\n  )\n  if (status === 200) dispatch(setItemCategories(data))\n}\n","/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport {\n  CButton,\n  CRow,\n  CModal,\n  CModalHeader,\n  CModalBody,\n  CModalFooter,\n  CContainer,\n  CCol,\n  CFormInput,\n  CForm,\n  CFormSelect,\n} from '@coreui/react'\nimport Quagga from 'quagga'\nimport { getItemCategories } from 'src/modules/billing/services/item-categories.service'\nimport { saveItem } from '../../services/items.service'\n\nconst itemInitialState = {\n  name: '',\n  code: '',\n  description: '',\n  price: '',\n  categoryId: '',\n  units: '',\n  measurementUnit: '',\n}\n\nfunction ItemForm(props) {\n  const dispatch = useDispatch()\n  const itemCategories = useSelector((state) => state.itemCategories.itemCategories)\n  const itemGlobal = useSelector((state) => state.items.item)\n  const [item, setItem] = useState(itemInitialState)\n  const [failedValidations, setFailedValidations] = useState({\n    code: false,\n    description: false,\n    name: false,\n    price: false,\n    categoryId: false,\n    units: false,\n    measurementUnit: false,\n  })\n  const [modal, setModal] = useState(false)\n  const toggle = () => setModal(!modal)\n\n  useEffect(() => {\n    itemGlobal && setItem(itemGlobal)\n    dispatch(getItemCategories({ parse: true }))\n  }, [dispatch, itemGlobal])\n\n  const onChangeField = ({ target: { name, value } }) => {\n    setItem({\n      ...item,\n      [name]: value,\n    })\n    setFailedValidations({ ...failedValidations, [name]: !value })\n  }\n\n  const populateFieldsForm = ({ _id, code, description, price }) => {\n    setItem({\n      ...item,\n      _id,\n      code,\n      description,\n      price,\n    })\n  }\n\n  const clearFieldsForm = () => {\n    setItem(itemInitialState)\n  }\n\n  const scanItem = () => {\n    toggle()\n    setTimeout(() => {\n      Quagga.init(\n        {\n          inputStream: {\n            name: 'Live',\n            type: 'LiveStream',\n            constraints: {\n              width: 320,\n              height: 380,\n              facingMode: 'environment',\n            },\n            target: document.querySelector('#reader'), // Or '#yourElement' (optional)\n          },\n          decoder: {\n            readers: [\n              {\n                format: 'ean_reader',\n                config: {\n                  supplements: ['ean_13_reader'],\n                },\n              },\n            ],\n          },\n        },\n        function (err) {\n          if (err) {\n            console.log(err)\n            return\n          }\n          console.log('Ready to start')\n          Quagga.start()\n        },\n      )\n      Quagga.onDetected(({ codeResult: { code } }) => {\n        console.log({ code })\n        setItem({\n          ...item,\n          code,\n        })\n        setModal(false)\n        Quagga.stop()\n      })\n      Quagga.onProcessed((result) => {\n        const drawingCanvas = Quagga.canvas.dom.overlay\n        drawingCanvas.style.display = 'none'\n      })\n    }, 300)\n  }\n\n  const closeBtn = (\n    <button className=\"close\" onClick={toggle}>\n      &times;\n    </button>\n  )\n\n  const isValidForm = () => {\n    const { name, code, description, price, categoryId, units, measurementUnit } = {\n      ...item,\n    }\n    const failedValidationsObj = { ...failedValidations }\n    failedValidationsObj.code = !code\n    failedValidationsObj.description = !description\n    failedValidationsObj.name = !name\n    failedValidationsObj.price = !price\n    failedValidationsObj.categoryId = !categoryId\n    failedValidationsObj.units = !units\n    failedValidationsObj.measurementUnit = !measurementUnit\n    setFailedValidations(failedValidationsObj)\n    return Object.values(failedValidationsObj).every((validation) => validation === false)\n  }\n\n  const save = async () => {\n    if (isValidForm()) {\n      props.save({\n        ...item,\n      })\n      clearFieldsForm()\n    }\n  }\n\n  const cancel = () => {\n    props.cancel()\n  }\n\n  return (\n    <>\n      <CContainer fluid>\n        <CForm className=\"row g-3 needs-validation\" noValidate>\n          <CRow style={{ marginTop: '40px' }}>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Código\"\n                type=\"text\"\n                name=\"code\"\n                value={item.code}\n                feedback=\"Campo obligatorio\"\n                invalid={failedValidations.code}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Nombre\"\n                type=\"text\"\n                name=\"name\"\n                value={item.name}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.name}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Descripción\"\n                type=\"text\"\n                name=\"description\"\n                value={item.description}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.description}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Precio\"\n                type=\"number\"\n                name=\"price\"\n                value={item.price}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.price}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n          </CRow>\n          <CRow>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormSelect\n                label=\"Categoria\"\n                name=\"categoryId\"\n                value={item.categoryId}\n                required\n                onChange={(event) => onChangeField(event)}\n                aria-label=\"Default select example\"\n                options={['Seleccione la categoria', ...itemCategories]}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Unidades\"\n                type=\"number\"\n                name=\"units\"\n                value={item.units}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.units}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Unidad de medida\"\n                type=\"text\"\n                name=\"measurementUnit\"\n                value={item.measurementUnit}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.measurementUnit}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n          </CRow>\n          <CRow className=\"mt-5\">\n            <CCol xs=\"8\" lg=\"2\">\n              <CButton variant=\"outline\" color=\"success\" type=\"button\" onClick={() => save()}>\n                {itemGlobal ? 'ACTUALIZAR' : 'GUARDAR'}\n              </CButton>\n            </CCol>\n            <CCol xs=\"4\" lg=\"2\">\n              <CButton variant=\"outline\" color=\"secondary\" onClick={() => cancel()}>\n                CANCELAR\n              </CButton>\n            </CCol>\n          </CRow>\n        </CForm>\n      </CContainer>\n      <CModal isOpen={modal} toggle={toggle}>\n        <CModalHeader toggle={toggle} close={closeBtn}>\n          Escaneando\n        </CModalHeader>\n        <CModalBody>\n          <div id=\"reader\" width=\"600px\" style={{ maxWidth: '750px' }}></div>\n        </CModalBody>\n        <CModalFooter>\n          <CButton color=\"secondary\" onClick={toggle}>\n            Cancelar\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </>\n  )\n}\n\nexport default ItemForm\n\nItemForm.propTypes = {\n  cancel: PropTypes.func.isRequired,\n  save: PropTypes.func.isRequired,\n}\n","import React, { useState, useEffect } from 'react'\n\nimport {\n  CCard,\n  CCardHeader,\n  CCardFooter,\n  CContainer,\n  CRow,\n  CButton,\n  CCardBody,\n  CCol,\n  CCardImage,\n  CTable,\n  CTableBody,\n  CTableRow,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CInputGroup,\n  CFormInput,\n} from '@coreui/react'\nimport ItemForm from './ItemForm'\nimport DefaultImg from './../../../../assets/images/new.ico'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getItems, saveItem, updateItem } from 'src/modules/billing/services/items.service'\nimport CONSTANTS from 'src/constants'\nimport { setItem } from '../../reducers/items.reducer'\nimport { formatCurrency } from 'src/utils'\n\nconst { ENTER_KEYCODE, TAB_KEYCODE } = CONSTANTS\n\nfunction Item() {\n  const dispatch = useDispatch()\n  const items = useSelector((state) => state.items.items)\n  //const saveSuccess = useSelector((state) => state.items.saveSuccess)\n  const [searchTerm, setSearchTerm] = useState('')\n  let [editing, setEditing] = useState(false)\n  let [page, setPage] = useState(1)\n\n  useEffect(() => {\n    dispatch(getItems())\n  }, [dispatch])\n\n  const save = (item) => {\n    if (item._id) {\n      dispatch(updateItem(item))\n      return\n    }\n    dispatch(saveItem(item))\n  }\n\n  const cancel = async () => {\n    dispatch(getItems())\n    setEditing(false)\n  }\n\n  const handlePrevPage = async () => {\n    const newPage = page === 1 ? 1 : page - 1\n    setPage(newPage)\n    dispatch(getItems({ page: newPage }))\n  }\n\n  const handleNextPage = async () => {\n    const newPage = page + 1\n    setPage(newPage)\n    dispatch(getItems({ page: newPage }))\n  }\n\n  const onChangeField = ({ target: { value } }) => {\n    setSearchTerm(value)\n  }\n\n  const onKeyDownCodeField = async ({ keyCode }) => {\n    if ([ENTER_KEYCODE, TAB_KEYCODE].includes(keyCode)) search()\n  }\n\n  const search = async () => {\n    if (!!searchTerm) {\n      dispatch(getItems({ code: searchTerm.trim(), name: searchTerm.trim(), page: 1 }))\n      return\n    }\n    dispatch(getItems({ page: 1 }))\n  }\n\n  const handleEdit = (item) => {\n    setEditing(true)\n    dispatch(setItem(item))\n  }\n  console.log({ items })\n  return (\n    <>\n      <CContainer className=\"mt--6\" fluid>\n        <CRow>\n          <CCol>\n            <CCard className=\"mt-6 shadow border-10\">\n              <CCardHeader className=\"border-0\">\n                {!editing && (\n                  <CRow>\n                    <CCol xs=\"4\" lg=\"3\">\n                      <CButton variant=\"outline\" color=\"success\" onClick={() => setEditing(true)}>\n                        NUEVO ITEM\n                      </CButton>\n                    </CCol>\n                    <CCol lg=\"5\">\n                      <CInputGroup>\n                        <CFormInput\n                          type=\"text\"\n                          name=\"searchTerm\"\n                          placeholder=\"...\"\n                          value={searchTerm}\n                          onChange={(event) => onChangeField(event)}\n                          onKeyDown={(event) => onKeyDownCodeField(event)}\n                        />\n                        <CButton type=\"button\" variant=\"outline\" color=\"primary\" onClick={search}>\n                          BUSCAR\n                        </CButton>\n                      </CInputGroup>\n                    </CCol>\n                  </CRow>\n                )}\n              </CCardHeader>\n              <CCardBody>\n                {!editing && (\n                  <>\n                    <div className=\"d-lg-none\">\n                      {items.map(({ name, code, description, price }) => (\n                        <CCard\n                          key={code}\n                          style={{\n                            width: 'auto',\n                          }}\n                        >\n                          <CRow className=\"g-0\" key={code}>\n                            <CCol xs={4}>\n                              <CCardImage src={DefaultImg} />\n                            </CCol>\n                            <CCol xs={8}>\n                              <CCardBody>\n                                <CRow>\n                                  <CCol>{name}</CCol>\n                                </CRow>\n                                <CRow>\n                                  <CCol>{code}</CCol>\n                                </CRow>\n                                <CRow>\n                                  <CCol>{description}</CCol>\n                                </CRow>\n                                <CRow>\n                                  <CCol>${price}</CCol>\n                                </CRow>\n                              </CCardBody>\n                            </CCol>\n                          </CRow>\n                        </CCard>\n                      ))}\n                    </div>\n                    <div className=\"d-none d-lg-block\">\n                      <CTable>\n                        <CTableHead>\n                          <CTableRow>\n                            <CTableHeaderCell>Nombre</CTableHeaderCell>\n                            <CTableHeaderCell>Código</CTableHeaderCell>\n                            <CTableHeaderCell>Descripción</CTableHeaderCell>\n                            <CTableHeaderCell>Precio</CTableHeaderCell>\n                            <CTableHeaderCell>&nbsp;</CTableHeaderCell>\n                          </CTableRow>\n                        </CTableHead>\n                        <CTableBody>\n                          {items.map((item) => (\n                            <CTableRow key={item.code}>\n                              <CTableDataCell xs=\"12\" className=\"text-uppercase\">\n                                {item.name}\n                              </CTableDataCell>\n                              <CTableDataCell className=\"fs-6\" xs=\"12\">\n                                {item.code}\n                              </CTableDataCell>\n                              <CTableDataCell xs=\"12\" className=\"text-break\">\n                                {item.description}\n                              </CTableDataCell>\n                              <CTableDataCell xs=\"12\">{formatCurrency(item.price)}</CTableDataCell>\n                              <CTableDataCell xs=\"12\">\n                                <CButton\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  color=\"info\"\n                                  onClick={() => handleEdit(item)}\n                                >\n                                  Editar\n                                </CButton>\n                              </CTableDataCell>\n                            </CTableRow>\n                          ))}\n                        </CTableBody>\n                      </CTable>\n                    </div>\n\n                    <CCardFooter className=\"py-4\">\n                      <CRow>\n                        <CCol>\n                          <div className=\"d-grid col-12 mx-auto\">\n                            <CButton\n                              type=\"button\"\n                              variant=\"outline\"\n                              color=\"secondary\"\n                              onClick={handlePrevPage}\n                            >\n                              ANTERIOR\n                            </CButton>\n                          </div>\n                        </CCol>\n                        <CCol>\n                          <div className=\"d-grid col-12 mx-auto\">\n                            <CButton\n                              type=\"button\"\n                              variant=\"outline\"\n                              color=\"secondary\"\n                              onClick={handleNextPage}\n                            >\n                              SIGUIENTE\n                            </CButton>\n                          </div>\n                        </CCol>\n                      </CRow>\n                    </CCardFooter>\n                  </>\n                )}\n                {editing && <ItemForm save={save} cancel={cancel} />}\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </>\n  )\n}\n\nexport default Item\n","import dayjs from 'dayjs'\n\nexport const formatCurrency = (amount) => {\n  return Number.isInteger(amount) && amount >= 0\n    ? new Intl.NumberFormat('es-CO', {\n        style: 'currency',\n        currency: 'COP',\n        maximumFractionDigits: 0,\n      }).format(amount)\n    : amount\n}\n\nexport const formatDate = (dateAsString, format = 'DD-MM-YYYY hh:mm a') => {\n  return dayjs(dateAsString).format(format)\n}\n"],"names":["ENTER_KEYCODE","TAB_KEYCODE","AVAILABLE_BILLS","saveItemCategory","billing","dispatch","_","api","post","status","saveSuccess","getItemCategories","params","searchParams","URLSearchParams","toString","get","length","data","setItemCategories","itemInitialState","name","code","description","price","categoryId","units","measurementUnit","props","useDispatch","itemCategories","useSelector","state","itemGlobal","items","item","useState","setItem","failedValidations","setFailedValidations","modal","setModal","toggle","useEffect","parse","onChangeField","target","value","closeBtn","className","onClick","isValidForm","failedValidationsObj","Object","values","every","validation","save","fluid","noValidate","style","marginTop","xs","lg","label","type","feedback","invalid","required","onChange","event","feedbackInvalid","options","variant","color","cancel","isOpen","close","id","width","maxWidth","CONSTANTS","searchTerm","setSearchTerm","editing","setEditing","page","setPage","getItems","handlePrevPage","newPage","handleNextPage","onKeyDownCodeField","keyCode","includes","search","trim","console","log","placeholder","onKeyDown","map","src","DefaultImg","formatCurrency","size","handleEdit","_id","updateItem","saveItem","amount","Number","isInteger","Intl","NumberFormat","currency","maximumFractionDigits","format","formatDate","dateAsString","dayjs"],"sourceRoot":""}