{"version":3,"file":"static/js/270.0cfb7675.chunk.js","mappings":"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","sources":["constants.js","hooks/useDidUpdate.js","modules/billing/services/item-categories.service.js","modules/billing/views/items/ItemForm.js","modules/billing/views/items/Items.js","modules/shared/services/notification.service.js","utils/index.js"],"sourcesContent":["const CONSTANTS = {\n  ENTER_KEYCODE: 13,\n  TAB_KEYCODE: 9,\n  AVAILABLE_BILLS: [2000, 5000, 10000, 20000, 50000, 100000],\n}\n\nexport default CONSTANTS\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useRef } from 'react'\n\nexport const useDidUpdate = (callback, dependecies) => {\n  const mounted = useRef(false)\n\n  useEffect(() => {\n    if (mounted.current) {\n      return callback()\n    } else {\n      mounted.current = true\n    }\n  }, dependecies)\n}\n","import { saveSuccess, setItemCategories } from '../reducers/item-categories.reducer'\n\nexport const saveItemCategory = (billing) => async (dispatch, _, api) => {\n  const { status } = await api.post('/item-categories', billing)\n  status === 200 ? dispatch(saveSuccess(true)) : dispatch(saveSuccess(false))\n}\n\nexport const getItemCategories = (params) => async (dispatch, _, api) => {\n  const searchParams = new URLSearchParams(params).toString()\n  const { data, status } = await api.get(\n    `/item-categories${searchParams.length > 0 ? '?' + searchParams : ''}`,\n  )\n  if (status === 200) dispatch(setItemCategories(data))\n}\n","/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport {\n  CButton,\n  CRow,\n  CModal,\n  CModalHeader,\n  CModalBody,\n  CModalFooter,\n  CContainer,\n  CCol,\n  CFormInput,\n  CForm,\n  CFormSelect,\n} from '@coreui/react'\nimport Quagga from 'quagga'\nimport { getItemCategories } from 'src/modules/billing/services/item-categories.service'\nimport { existByCode } from '../../services/items.service'\nimport { useDidUpdate } from 'src/hooks/useDidUpdate'\n\nconst itemInitialState = {\n  name: '',\n  code: '',\n  description: '',\n  price: '',\n  categoryId: '',\n  units: 0,\n  measurementUnit: '',\n}\n\nfunction ItemForm(props) {\n  const dispatch = useDispatch()\n  const itemCategories = useSelector((state) => state.itemCategories.itemCategories)\n  const codeRegistered = useSelector((state) => state.items.existsByCode)\n  const [item, setItem] = useState(itemInitialState)\n  const [failedValidations, setFailedValidations] = useState({\n    code: false,\n    description: false,\n    name: false,\n    price: false,\n    categoryId: false,\n    measurementUnit: false,\n  })\n  const [modal, setModal] = useState(false)\n  const toggle = () => setModal(!modal)\n\n  useEffect(() => {\n    props.item && setItem(props.item)\n    dispatch(getItemCategories({ parse: true }))\n  }, [dispatch, props.item])\n\n  const validateCodeExistence = (code) => {\n    dispatch(existByCode(code))\n  }\n\n  const onChangeField = ({ target: { name, value } }) => {\n    setItem({\n      ...item,\n      [name]: value,\n    })\n    setFailedValidations({ ...failedValidations, [name]: !value })\n    if (name === 'code') {\n      validateCodeExistence(value)\n    }\n  }\n\n  const clearFieldsForm = () => {\n    setItem(itemInitialState)\n  }\n\n  const scanItem = () => {\n    toggle()\n    setTimeout(() => {\n      Quagga.init(\n        {\n          inputStream: {\n            name: 'Live',\n            type: 'LiveStream',\n            constraints: {\n              width: 320,\n              height: 380,\n              facingMode: 'environment',\n            },\n            target: document.querySelector('#reader'), // Or '#yourElement' (optional)\n          },\n          decoder: {\n            readers: [\n              {\n                format: 'ean_reader',\n                config: {\n                  supplements: ['ean_13_reader'],\n                },\n              },\n            ],\n          },\n        },\n        function (err) {\n          if (err) {\n            console.log(err)\n            return\n          }\n          console.log('Ready to start')\n          Quagga.start()\n        },\n      )\n      Quagga.onDetected(({ codeResult: { code } }) => {\n        console.log({ code })\n        setItem({\n          ...item,\n          code,\n        })\n        setModal(false)\n        Quagga.stop()\n      })\n      Quagga.onProcessed((result) => {\n        const drawingCanvas = Quagga.canvas.dom.overlay\n        drawingCanvas.style.display = 'none'\n      })\n    }, 300)\n  }\n\n  const closeBtn = (\n    <button className=\"close\" onClick={toggle}>\n      &times;\n    </button>\n  )\n\n  const isValidForm = () => {\n    const { name, code, description, price, categoryId, measurementUnit } = {\n      ...item,\n    }\n    const failedValidationsObj = { ...failedValidations }\n    failedValidationsObj.code = !code || codeRegistered\n    failedValidationsObj.description = !description\n    failedValidationsObj.name = !name\n    failedValidationsObj.price = !price\n    failedValidationsObj.categoryId = !categoryId\n    failedValidationsObj.measurementUnit = !measurementUnit\n    setFailedValidations(failedValidationsObj)\n    return Object.values(failedValidationsObj).every((validation) => validation === false)\n  }\n\n  const save = async () => {\n    if (isValidForm()) {\n      props.onSave({\n        ...item,\n      })\n      clearFieldsForm()\n    }\n  }\n\n  const cancel = () => {\n    props.onCancel()\n  }\n\n  return (\n    <>\n      <CContainer fluid>\n        <CForm className=\"row g-3 needs-validation\" noValidate>\n          <CRow style={{ marginTop: '40px' }}>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Código\"\n                type=\"text\"\n                name=\"code\"\n                value={item.code}\n                feedback={\n                  codeRegistered ? 'El código ya se encuentra registrado' : 'Campo obligatorio'\n                }\n                invalid={codeRegistered || failedValidations.code}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Nombre\"\n                type=\"text\"\n                name=\"name\"\n                value={item.name}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.name}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Descripción\"\n                type=\"text\"\n                name=\"description\"\n                value={item.description}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.description}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n          </CRow>\n          <CRow>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Precio\"\n                type=\"number\"\n                name=\"price\"\n                value={item.price}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.price}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormSelect\n                label=\"Categoria\"\n                name=\"categoryId\"\n                value={item.categoryId}\n                required\n                onChange={(event) => onChangeField(event)}\n                aria-label=\"Default select example\"\n                options={['Seleccione la categoria', ...itemCategories]}\n              />\n            </CCol>\n            <CCol xs=\"12\" lg=\"4\">\n              <CFormInput\n                label=\"Unidad de medida\"\n                type=\"text\"\n                name=\"measurementUnit\"\n                value={item.measurementUnit}\n                feedbackInvalid=\"Campo obligatorio\"\n                invalid={failedValidations.measurementUnit}\n                required\n                onChange={(event) => onChangeField(event)}\n              />\n            </CCol>\n          </CRow>\n          <CRow className=\"mt-5\">\n            <CCol xs=\"8\" lg=\"2\">\n              <CButton variant=\"outline\" color=\"success\" type=\"button\" onClick={() => save()}>\n                {props.item ? 'ACTUALIZAR' : 'GUARDAR'}\n              </CButton>\n            </CCol>\n            <CCol xs=\"4\" lg=\"2\">\n              <CButton variant=\"outline\" color=\"secondary\" onClick={() => cancel()}>\n                CANCELAR\n              </CButton>\n            </CCol>\n          </CRow>\n        </CForm>\n      </CContainer>\n      <CModal isOpen={modal} toggle={toggle}>\n        <CModalHeader toggle={toggle} close={closeBtn}>\n          Escaneando\n        </CModalHeader>\n        <CModalBody>\n          <div id=\"reader\" width=\"600px\" style={{ maxWidth: '750px' }}></div>\n        </CModalBody>\n        <CModalFooter>\n          <CButton color=\"secondary\" onClick={toggle}>\n            Cancelar\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </>\n  )\n}\n\nexport default ItemForm\n\nItemForm.propTypes = {\n  onCancel: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  item: PropTypes.object,\n}\n","import React, { useState, useEffect } from 'react'\n\nimport {\n  CCard,\n  CCardHeader,\n  CCardFooter,\n  CContainer,\n  CRow,\n  CButton,\n  CCardBody,\n  CCol,\n  CCardImage,\n  CTable,\n  CTableBody,\n  CTableRow,\n  CTableDataCell,\n  CTableHead,\n  CTableHeaderCell,\n  CInputGroup,\n  CFormInput,\n} from '@coreui/react'\nimport ItemForm from './ItemForm'\nimport DefaultImg from './../../../../assets/images/new.ico'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getItems, saveItem, updateItem } from 'src/modules/billing/services/items.service'\nimport CONSTANTS from 'src/constants'\nimport { formatCurrency } from 'src/utils'\nimport { useDidUpdate } from 'src/hooks/useDidUpdate'\nimport { sendToast } from '../../../shared/services/notification.service'\n\nconst { ENTER_KEYCODE, TAB_KEYCODE } = CONSTANTS\n\nfunction Item() {\n  const dispatch = useDispatch()\n  const items = useSelector((state) => state.items.items)\n  const saveSuccess = useSelector((state) => state.items.saveSuccess)\n  const [searchTerm, setSearchTerm] = useState('')\n  let [editing, setEditing] = useState(false)\n  let [item, setItem] = useState(null)\n  let [page, setPage] = useState(1)\n\n  useEffect(() => {\n    setSearchTerm('')\n  }, [])\n\n  useEffect(() => {\n    dispatch(getItems({ page: 1 }))\n  }, [dispatch])\n\n  useDidUpdate(() => {\n    sendToast(dispatch, { message: 'Guardado exitosamente!' })\n  }, [saveSuccess])\n\n  const save = (item) => {\n    if (item._id) {\n      dispatch(updateItem(item))\n      return\n    }\n    dispatch(saveItem(item))\n  }\n\n  const cancel = async () => {\n    dispatch(getItems({ page: 1 }))\n    setEditing(false)\n  }\n\n  const handlePrevPage = async () => {\n    const newPage = page === 1 ? 1 : page - 1\n    setPage(newPage)\n    dispatch(getItems({ page: newPage }))\n  }\n\n  const handleNextPage = async () => {\n    const newPage = page + 1\n    setPage(newPage)\n    dispatch(getItems({ page: newPage }))\n  }\n\n  const onChangeField = ({ target: { value } }) => {\n    setSearchTerm(value)\n  }\n\n  const onKeyDownCodeField = async ({ keyCode }) => {\n    if ([ENTER_KEYCODE, TAB_KEYCODE].includes(keyCode)) search()\n  }\n\n  const search = async () => {\n    if (!!searchTerm) {\n      dispatch(getItems({ code: searchTerm.trim(), name: searchTerm.trim(), page: 1 }))\n      return\n    }\n    dispatch(getItems({ page: 1 }))\n  }\n\n  const handleEdit = (item) => {\n    setEditing(true)\n    setItem(item)\n  }\n\n  const handleNewItem = () => {\n    setItem(null)\n    setEditing(true)\n  }\n\n  return (\n    <>\n      <CContainer className=\"mt--6\" fluid>\n        <CRow>\n          <CCol>\n            <CCard className=\"mt-6 shadow border-10\">\n              <CCardHeader className=\"border-0\">\n                {!editing && (\n                  <CRow>\n                    <CCol xs=\"4\" lg=\"3\">\n                      <CButton variant=\"outline\" color=\"success\" onClick={handleNewItem}>\n                        NUEVO ITEM\n                      </CButton>\n                    </CCol>\n                    <CCol lg=\"5\">\n                      <CInputGroup>\n                        <CFormInput\n                          type=\"text\"\n                          name=\"searchTerm\"\n                          placeholder=\"...\"\n                          value={searchTerm}\n                          onChange={(event) => onChangeField(event)}\n                          onKeyDown={(event) => onKeyDownCodeField(event)}\n                        />\n                        <CButton type=\"button\" variant=\"outline\" color=\"primary\" onClick={search}>\n                          BUSCAR\n                        </CButton>\n                      </CInputGroup>\n                    </CCol>\n                  </CRow>\n                )}\n              </CCardHeader>\n              <CCardBody>\n                {!editing && (\n                  <>\n                    <div className=\"d-lg-none\">\n                      {items.map(({ name, code, description, price }) => (\n                        <CCard\n                          key={code}\n                          style={{\n                            width: 'auto',\n                          }}\n                        >\n                          <CRow className=\"g-0\" key={code}>\n                            <CCol xs={4}>\n                              <CCardImage src={DefaultImg} />\n                            </CCol>\n                            <CCol xs={8}>\n                              <CCardBody>\n                                <CRow>\n                                  <CCol>{name}</CCol>\n                                </CRow>\n                                <CRow>\n                                  <CCol>{code}</CCol>\n                                </CRow>\n                                <CRow>\n                                  <CCol>{description}</CCol>\n                                </CRow>\n                                <CRow>\n                                  <CCol>${price}</CCol>\n                                </CRow>\n                              </CCardBody>\n                            </CCol>\n                          </CRow>\n                        </CCard>\n                      ))}\n                    </div>\n                    <div className=\"d-none d-lg-block\">\n                      <CTable>\n                        <CTableHead>\n                          <CTableRow>\n                            <CTableHeaderCell>Nombre</CTableHeaderCell>\n                            <CTableHeaderCell>Código</CTableHeaderCell>\n                            <CTableHeaderCell>Descripción</CTableHeaderCell>\n                            <CTableHeaderCell>Precio</CTableHeaderCell>\n                            <CTableHeaderCell>&nbsp;</CTableHeaderCell>\n                          </CTableRow>\n                        </CTableHead>\n                        <CTableBody>\n                          {items.map((item) => (\n                            <CTableRow key={item.code}>\n                              <CTableDataCell xs=\"12\" className=\"text-uppercase\">\n                                {item.name}\n                              </CTableDataCell>\n                              <CTableDataCell className=\"fs-6\" xs=\"12\">\n                                {item.code}\n                              </CTableDataCell>\n                              <CTableDataCell xs=\"12\" className=\"text-break\">\n                                {item.description}\n                              </CTableDataCell>\n                              <CTableDataCell xs=\"12\">{formatCurrency(item.price)}</CTableDataCell>\n                              <CTableDataCell xs=\"12\">\n                                <CButton\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  color=\"info\"\n                                  onClick={() => handleEdit(item)}\n                                >\n                                  Editar\n                                </CButton>\n                              </CTableDataCell>\n                            </CTableRow>\n                          ))}\n                        </CTableBody>\n                      </CTable>\n                    </div>\n\n                    <CCardFooter className=\"py-4\">\n                      <CRow>\n                        <CCol>\n                          <div className=\"d-grid col-12 mx-auto\">\n                            <CButton\n                              type=\"button\"\n                              variant=\"outline\"\n                              color=\"secondary\"\n                              onClick={handlePrevPage}\n                            >\n                              ANTERIOR\n                            </CButton>\n                          </div>\n                        </CCol>\n                        <CCol>\n                          <div className=\"d-grid col-12 mx-auto\">\n                            <CButton\n                              type=\"button\"\n                              variant=\"outline\"\n                              color=\"secondary\"\n                              onClick={handleNextPage}\n                            >\n                              SIGUIENTE\n                            </CButton>\n                          </div>\n                        </CCol>\n                      </CRow>\n                    </CCardFooter>\n                  </>\n                )}\n                {editing && <ItemForm item={item} onSave={save} onCancel={cancel} />}\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </>\n  )\n}\n\nexport default Item\n","import { setShowToast, setToastConfig } from 'src/app.slice'\n\nexport const sendToast = (dispatch, { message, color = 'success', delay = 2000 }) => {\n  if (!message) console.error('Toast notification must have a message')\n  dispatch(\n    setToastConfig({\n      message,\n      color,\n      delay,\n    }),\n  )\n  dispatch(setShowToast(true))\n}\n","import dayjs from 'dayjs'\n\nexport const formatCurrency = (amount) => {\n  return Number.isInteger(amount) && amount >= 0\n    ? new Intl.NumberFormat('es-CO', {\n        style: 'currency',\n        currency: 'COP',\n        maximumFractionDigits: 0,\n      }).format(amount)\n    : amount\n}\n\nexport const formatDate = (dateAsString, format = 'DD-MM-YYYY hh:mm a') => {\n  return dayjs(dateAsString).format(format)\n}\n"],"names":["ENTER_KEYCODE","TAB_KEYCODE","AVAILABLE_BILLS","useDidUpdate","callback","dependecies","mounted","useRef","useEffect","current","saveItemCategory","billing","dispatch","_","api","post","status","saveSuccess","getItemCategories","params","searchParams","URLSearchParams","toString","get","length","data","setItemCategories","itemInitialState","name","code","description","price","categoryId","units","measurementUnit","props","useDispatch","itemCategories","useSelector","state","codeRegistered","items","existsByCode","useState","item","setItem","failedValidations","setFailedValidations","modal","setModal","toggle","parse","onChangeField","target","value","existByCode","closeBtn","className","onClick","isValidForm","failedValidationsObj","Object","values","every","validation","save","onSave","fluid","noValidate","style","marginTop","xs","lg","label","type","feedback","invalid","required","onChange","event","feedbackInvalid","options","variant","color","onCancel","isOpen","close","id","width","maxWidth","CONSTANTS","searchTerm","setSearchTerm","editing","setEditing","page","setPage","getItems","sendToast","message","cancel","handlePrevPage","newPage","handleNextPage","onKeyDownCodeField","keyCode","includes","search","trim","placeholder","onKeyDown","map","src","DefaultImg","formatCurrency","size","handleEdit","_id","updateItem","saveItem","delay","console","error","setToastConfig","setShowToast","amount","Number","isInteger","Intl","NumberFormat","currency","maximumFractionDigits","format","formatDate","dateAsString","dayjs"],"sourceRoot":""}